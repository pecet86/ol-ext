'use strict';ol.control.ExportPDFControl=function(a){var b=this,c=a||{},d=document.createElement('button');d.className='glyphicon glyphicon-export',d.setAttribute('download',c.downloadName||'export_pdf'),b.exportPDFElement=d;var e=document.createElement('div');e.className='export-pdf ol-unselectable ol-control',e.appendChild(d),e.setAttribute('data-toggle','tooltip'),e.setAttribute('title',c.tooltip||'Export PDF'),ol.control.Control.call(this,{element:e,target:c.target})},ol.inherits(ol.control.ExportPDFControl,ol.control.Control),ol.control.ExportPDFControl.prototype.exportPDFConfigure=function(a){var b=this,c=b.exportPDFElement.getAttribute('download'),d=a.getSource(),e=b.getMap(),f={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]},g=0,h=0;b.exportPDFElement.addEventListener('click',function(){function i(u,v){r=window.setTimeout(function(){g=0,h=0;try{var w=v.toDataURL('image/png'),x=new jsPDF('landscape',void 0,k);x.addImage(w,'JPEG',0,0,m[0],m[1]),x.save(c+'.pdf')}catch(y){console.log(y)}finally{d.un('tileloadstart',s),d.un('tileloadend',t,v),d.un('tileloaderror',t,v),e.setSize(p),e.getView().fit(q,p),e.renderSync(),b.exportPDFElement.removeAttribute('disabled'),document.body.style.cursor='auto'}},u)}function j(){r&&(clearTimeout(r),r=null)}b.exportPDFElement.setAttribute('disabled',!0),document.body.style.cursor='progress';var k='a4',l=72,m=f[k],n=Math.round(m[0]*l/25.4),o=Math.round(m[1]*l/25.4),p=e.getSize(),q=e.getView().calculateExtent(p),r=null,s=function(){g++,j()},t=function(){var u=this;h++,h==g&&i(100,u)};e.once('postcompose',function(u){var v=u.context.canvas;d.on('tileloadstart',s),d.on('tileloadend',t,v),d.on('tileloaderror',t,v),i(1e3,v)}),e.setSize([n,o]),e.getView().fit(q,e.getSize()),e.renderSync()},!1)};