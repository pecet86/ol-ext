'use strict';ol.interaction.DragAndDropDom=function(a){var b=a?a:{};ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DragAndDropDom.handleEvent}),this.dropListenKeys_=null,this.source_=b.source||null,this.features_=b.features?b.features:null,this.keyDnD_=b.keyDnD||'keyDnD',this.target=b.target?b.target:null},ol.inherits(ol.interaction.DragAndDropDom,ol.interaction.Interaction),ol.interaction.DragAndDropDom.handleDrop_=function(a){var b=this.getMap(),c=b.getEventCoordinate(a),d;try{d=JSON.parse(a.dataTransfer.getData(this.keyDnD_))}catch(e){return!1}this.handleResult_(d,c)},ol.interaction.DragAndDropDom.handleStop_=function(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect='copy'},ol.interaction.DragAndDropDom.prototype.handleResult_=function(a,b){var c=this,d;d=new ol.Feature(new ol.geom.Point(b)),d[c.keyDnD_]=a,c.dispatchEvent({type:'addfeature',feature:d,data:a}),c.source_&&c.source_.addFeature(d),c.features_&&c.features_.push(d)},ol.interaction.DragAndDropDom.prototype.setActive=function(a){ol.interaction.Interaction.prototype.setActive.call(this,a),a?this.registerListeners_():this.unregisterListeners_()},ol.interaction.DragAndDropDom.prototype.setMap=function(a){this.unregisterListeners_(),ol.interaction.Interaction.prototype.setMap.call(this,a),this.getActive()&&this.registerListeners_()},ol.interaction.DragAndDropDom.handleEvent=function(){return!0},ol.interaction.DragAndDropDom.prototype.dragPointType=function(a,b){a.dataTransfer.setData(this.keyDnD_,JSON.stringify(b))},ol.interaction.DragAndDropDom.prototype.registerListeners_=function(){var a=this,b=a.getMap();if(b){var c=a.target?a.target:b.getViewport();a.dropListenKeys_=[{type:'drop',method:ol.interaction.DragAndDropDom.handleDrop_.bind(a)},{type:'dragenter',method:ol.interaction.DragAndDropDom.handleStop_.bind(a)},{type:'dragover',method:ol.interaction.DragAndDropDom.handleStop_.bind(a)},{type:'drop',method:ol.interaction.DragAndDropDom.handleStop_.bind(a)}],a.dropListenKeys_.forEach(function(d){return c.addEventListener(d.type,d.method)})}},ol.interaction.DragAndDropDom.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(function(a){return dropArea.removeEventListener(a.type,a.method)}),this.dropListenKeys_=null)};